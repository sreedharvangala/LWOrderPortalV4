/*! 
* Data Aquarium Framework - Membership and Membership Manager
* Copyright 2008-2017 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
(function(){Type.registerNamespace("Web");var u=Web.Membership=function(){Web.Membership.initializeBase(this);this._membershipBar=null;this._intervalId=null;Web.Membership._instance=this;this._displayLogin=!0;n=$app;r=n.touch},i=Web.MembershipResources,t=window,n,r;u.prototype={initialize:function(){u.callBaseMethod(this,"initialize");u._instance||(u._instance=this);this._loginButtonClickHandler=Function.createDelegate(this,this._loginButtonClick);this._loginDialogMouseOverHandler=Function.createDelegate(this,this._loginDialogMouseOver);this._loginDialogMouseOutHandler=Function.createDelegate(this,this._loginDialogMouseOut);this._login_CompletedHandler=Function.createDelegate(this,this._login_Completed);this._method_FailureHandler=Function.createDelegate(this,this._method_Failure);this._textBoxKeyPressHandler=Function.createDelegate(this,this._textBoxKeyPress);this._body_keydownDelegate=Function.createDelegate(this,this._body_keydown);this._body_mousemoveDelegate=Function.createDelegate(this,this._body_mousemove);$addHandler(document.body,"keydown",this._body_keydownDelegate);$addHandler(document.body,"mousemove",this._body_mousemoveDelegate);this._window_beforeUnloadDelegate=Function.createDelegate(this,this._window_beforeUnload);$addHandler(window,"beforeunload",this._window_beforeUnloadDelegate)},dispose:function(){this.idleInterval(!1);this._disposeIdentityResources();$removeHandler(window,"beforeunload",this._window_beforeUnloadDelegate);$removeHandler(document.body,"keydown",this._body_keydownDelegate);$removeHandler(document.body,"mousemove",this._body_mousemoveDelegate);this._loginButton&&$clearHandlers(this._loginButton);this._loginDialog&&$clearHandlers(this._loginDialog);this._userName&&$clearHandlers(this._userName);this._password&&$clearHandlers(this._password);delete this._membershipBar;delete this._bookmarkBar;this._hideHistory();u.callBaseMethod(this,"dispose")},get_membershipBar:function(){return this._membershipBar},get_isLoginDialogVisible:function(){return this._isLoginDialogVisible},set_isLoginDialogVisible:function(n){this._isLoginDialogVisible=n},get_displayRememberMe:function(){return this._displayRememberMe!=!1},set_displayRememberMe:function(n){this._displayRememberMe=n},get_rememberMeSet:function(){return this._rememberMeSet==!0},set_rememberMeSet:function(n){this._rememberMeSet=n},get_displayLogin:function(){return this._displayLogin},set_displayLogin:function(n){this._displayLogin=n},get_displayPasswordRecovery:function(){return this._displayPasswordRecovery!=!1},set_displayPasswordRecovery:function(n){this._displayPasswordRecovery=n},get_displaySignUp:function(){return this._displaySignUp!=!1},set_displaySignUp:function(n){this._displaySignUp=n},get_displayMyAccount:function(){return this._displayMyAccount},set_displayMyAccount:function(n){this._displayMyAccount=n},get_displayHelp:function(){return this._displayHelp},set_displayHelp:function(n){this._displayHelp=n},get_baseUrl:function(){return this._baseUrl||__baseUrl},set_baseUrl:function(n){this._baseUrl=n},get_servicePath:function(){return this._servicePath||__servicePath},set_servicePath:function(n){this._servicePath=n},get_welcome:function(){return String.isNullOrEmpty(this._welcome)?i.Bar.Welcome:this._welcome},set_welcome:function(n){this._welcome=n},get_user:function(){return this._user},set_user:function(n){this._user=n},get_enablePermalinks:function(){return this._enablePermalinks==!0},set_enablePermalinks:function(n){this._enablePermalinks=n},get_enableHistory:function(){return this._enableHistory==!0},set_enableHistory:function(n){this._enableHistory=n},get_isAuthenticated:function(){return this._isAuthenticated},set_isAuthenticated:function(n){this._isAuthenticated=n},get_commandLine:function(){return this._commandLine},set_commandLine:function(n){this._commandLine=n},showLoginDialog:function(){this.hideLoginDialog()},hideLoginDialog:function(){this._intevalId&&(t.clearInterval(this._intervalId),this._intervalId=null)},addPermalink:function(i,r){if(this.get_enablePermalinks()||this.get_enableHistory()){var u=location.pathname+"?"+i;this._savePermalinkParams={link:u,html:n.htmlEncode(r)};t.setTimeout("Web.Membership._instance._savePermalink()",500);Sys.UI.DomElement.getVisible(this._membershipBar)||this._encodePermalink_Success("")}},_savePermalink:function(){Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),"SavePermalink",!1,this._savePermalinkParams)},showPermalink:function(){if(!this._savePermalinkParams||String.isNullOrEmpty(this._savePermalinkParams.html)){n.alert(i.Messages.PermalinkUnavailable);return}this.encodePermalink(this._savePermalinkParams.link,Function.createDelegate(this,this._encodePermalink_Success))},encodePermalink:function(n,t){t||(t=function(n){location.href=n});Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),"EncodePermalink",!1,{link:n,rooted:!0},t,Function.createDelegate(this,this._onMethodFailed))},showHistory:function(){this._historyDiv||Sys.Net.WebServiceProxy.invoke(this.get_servicePath(),"ListAllPermalinks",!1,null,Function.createDelegate(this,this._showHistory_Success),Function.createDelegate(this,this._method_Failure))},_focusHistory:function(){var n=$get(this.get_id()+"_RotateHistory");n&&n.focus()},_renderHistory:function(){var c=n.clientBounds(),v=n.scrolling(),e=new Sys.StringBuilder,f,u,y,t,r,h;e.appendFormat('<div onclick="$find(\'{0}\')._hideHistory()" style="width:{1}px;height:{2}px;">',this.get_id(),c.width,c.height);f=this._historyData.length;f>10&&(f=10);var l=0,a=0,s=50,o=30;for(f<=3?(s=65,o=30):f<=6&&(s=65,o=30),u=f-1;u>=0;u--)y=this._historyData[u][1],e.appendFormat('<div style="position:absolute;background-color:#333333;"><\/div><div id="{0}_Card{1}" onclick="$find(\'{0}\')._selectHistory({1});return false;" style="position:absolute;left:{2}px;top:{3}px;" onmouseover="if(this._Activated!=99){{this.style.zIndex=600001;this._Activated=99;var s=this.previousSibling;s.style.zIndex=600000;s.style.backgroundColor=\'black\'}}" onmouseout="this.style.zIndex=\'{4}\';this._Activated=0;var s=this.previousSibling;s.style.zIndex=\'{4}\';s.style.backgroundColor=\'#333333\'">',this.get_id(),u,l,a,Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.version>=9?-1:"auto"),e.append(y),e.append("<\/div>"),u==0&&e.appendFormat('<a id="{0}_RotateHistory" class="RotateHistory" href="javascript:" onclick="$find(\'{0}\')._rotateHistory(event);return false;"><div id="{0}_RotateButton" title="{3}" style="position:absolute;z-index:600002;left:{1}px;top:{2}px;" class="RotateHistory">&nbsp;<\/div><\/a>',this.get_id(),l+110,a-15,i.Bar.RotateHistory),l+=s,a+=o;for(e.append("<\/div>"),this._historyDiv.innerHTML=e.toString(),t=$get(this.get_id()+"_Card0"),r=n.bounds(t),s=Math.floor((c.width-(r.x+r.width))/2),o=this._historyOffsetTop?this._historyOffsetTop:Math.floor((c.height-(r.y+r.height))/2),this._historyOffsetTop=o,t=$get(this.get_id()+"_RotateButton"),t.style.left=t.offsetLeft+s+"px",t.style.top=t.offsetTop+o+"px",f==1&&(t.style.width="1px",t.style.height="1px"),u=0;u<f;u++)t=$get(this.get_id()+"_Card"+u),t.style.left=t.offsetLeft+s+"px",t.style.top=t.offsetTop+o+"px",r=n.bounds(t),r.x+=10-v.x,r.y+=4-v.y,h=t.previousSibling,h.style.left=r.x+"px",h.style.top=r.y+"px",h.style.width=r.width-13+"px",h.style.height=r.height-0+"px"},_selectHistory:function(n){this.encodePermalink(this._historyData[n][0])},_hideHistory:function(){this._historyModalPopup&&(this._historyModalPopup.hide(),this._historyDiv&&(this._historyDiv.parentNode.removeChild(this._historyDiv),delete this._historyDiv),this._historyModalPopup.dispose(),delete this._historyModalPopup)},_rotateHistory:function(n){var i=this._historyData[0],t;Array.removeAt(this._historyData,0);Array.add(this._historyData,i);this._renderHistory();this._focusHistory();try{t=new Sys.UI.DomEvent(n);t.stopPropagation();t.preventDefault()}catch(r){}},_showHistory_Success:function(t){if(t.length==0){n.alert(i.Messages.HistoryUnavailable);return}this._historyData=t;var r=this._historyDiv=document.createElement("div");document.body.appendChild(r);r.id=this.get_id()+"_HistoryPanel";r.className="History";this._historyOffsetTop=null;this._renderHistory();this._historyModalPopup=$create(AjaxControlToolkit.ModalPopupBehavior,{PopupControlID:r.id,DropShadow:!1,BackgroundCssClass:"ModalBackground"},null,null,$get(this.get_id()+"_HistoryLink"));this._historyModalPopup.show();this._focusHistory()},_encodePermalink_Success:function(n){var i=$get(this.get_id()+"_Permalink"),r=$get(this.get_id()+"_AddToFavorites"),u=$get(this.get_id()+"_CancelFavorites"),t=!Sys.UI.DomElement.getVisible(i.parentNode);Sys.UI.DomElement.setVisible(i.parentNode,t);Sys.UI.DomElement.setVisible(r.parentNode,t);Sys.UI.DomElement.setVisible(u.parentNode,t);Sys.UI.DomElement.setVisible(this._membershipBar,!t);t&&(i.value=n);i.parentNode.title=this._savePermalinkParams.html.replace(/<div class="Value">/g," = ").replace(/(\s*<.+?>\s*)+/g,"\r\r").trim().replace(/&\w+;/g,"").replace(/(\r\r)+/g,"; ").replace(/;\s*=/g," = ").replace(/=\s*;/g," = ")},_addToFavorites:function(){var n;this._encodePermalink_Success("");var u=$get(this.get_id()+"_Permalink"),i=u.parentNode.title,r=u.value;t.sidebar?t.sidebar.addPanel(i,r,""):t.opera&&t.print?(n=document.createElement("a"),n.setAttribute("href",r),n.setAttribute("title",i),n.setAttribute("rel","sidebar"),n.click()):document.all&&t.external.AddFavorite(r,i)},changeLoginDialogVisibility:function(n,i){if(this._intevalId&&(t.clearInterval(this._intevalId),this._intevalId=null),i)this._intevalId=t.setInterval(String.format('$find("{0}").changeLoginDialogVisibility({1})',this.get_id(),n),i);else if(n!=this.get_isLoginDialogVisible()){var r=$get("LoginControlsRow",this._membershipBar);r&&(n?Sys.UI.DomElement.removeCssClass(this._loginDialog,"LoginDialogCollapsed"):Sys.UI.DomElement.addCssClass(this._loginDialog,"LoginDialogCollapsed"),Sys.UI.DomElement.setVisible(r,n));!n||document.activeElement&&document.activeElement.id=="Password"||this._userName.focus();this.set_isLoginDialogVisible(n);n&&Web.HoverMonitor._instance.close()}},get_authenticationEnabled:function(){return this._authenticationEnabled==null||this._authenticationEnabled==!0},set_authenticationEnabled:function(n){this._authenticationEnabled=n},get_idleTimeout:function(){return this._idleTimeout==null?0:this._idleTimeout},set_idleTimeout:function(n){this._idleTimeout=n},get_cultures:function(){return this._cultures},set_cultures:function(n){this._cultures=n},get_cultureName:function(){var t=this._cultureList,n;if(t)for(n=0;n<t.length;n++)if(t[n][2]=="True")return t[n][1];return null},changeCulture:function(t){var i=new Date;i.setDate(i.getDate()+14);document.cookie=String.format(".COTCULTURE={0}; expires={1}; path=/",t,i.toUTCString());location.replace(n.unanchor(location.href))},_idle:function(){var u,r,n,t;for(Web.HoverMonitor._instance.close(),u=Sys.Application.getComponents(),r=u.length-1;r>=0;r--)n=u[r],Web.DataView.isInstanceOfType(n)&&(n.get_isModal()?n.endModalState("Cancel"):n.get_lookupField()&&n.hideLookup());this._protecting=!0;t=this._idleDialog=document.createElement("div");t.id=this.get_id()+"$IdentityValidation";document.body.appendChild(t);t.innerHTML=String.format('<div class="ModalPlaceholder FixedDialog UserIdle"><div class="Text">{1}<\/div><div class="Buttons"><button onclick="$find(\'{0}\').logout();return false;" >{2}<\/button><\/div><\/div>',this.get_id(),i.Bar.UserIdle,i.Bar.LoginLink);this._identityModalPopup=$create(AjaxControlToolkit.ModalPopupBehavior,{PopupControlID:t.id,DropShadow:!0,BackgroundCssClass:"ModalBackground"},null,null,this._membershipBar.getElementsByTagName("a")[0]);this._identityModalPopup.show()},idle:function(){var t=(new Date).getTime()-this._lastActivity>this.get_idleTimeout()&&!this._protecting&&n.loggedIn();return t&&this._idle(),t},_disposeIdentityResources:function(){this._identityModalPopup&&(this._identityModalPopup.dispose(),this._idleDialog.parentNode.removeChild(this._idleDialog),delete this._idleDialog,this._identityModalPopup=null)},_updateLastActivity:function(){this._lastActivity=new Date},_body_keydown:function(n){this._updateLastActivity();this._historyDiv&&(n.keyCode==Sys.UI.Key.esc?(n.preventDefault(),this._hideHistory()):n.keyCode==Sys.UI.Key.tab?(n.preventDefault(),this._rotateHistory()):n.keyCode==Sys.UI.Key.enter&&(n.preventDefault(),this._selectHistory(0)))},_body_mousemove:function(){this._updateLastActivity()},_window_beforeUnload:function(){this._protecting&&(this._protecting=!1,this._disposeIdentityResources(),this.logout())},loggedIn:function(){var t=n.loggedIn();return t||String.isNullOrEmpty(this.get_user())||(t=!0),t},idleInterval:function(n){var i=this;i._idleIntervalId&&(clearInterval(i._idleIntervalId),i._idleIntervalId=null);n&&i.get_idleTimeout()>0&&(i._idleIntervalId=t.setInterval(function(){i.idle()},6e4))},updated:function(){var r,f,o,s,h,c,l,e,p;if(u.callBaseMethod(this,"updated"),r=i.Bar,f=this,f.idleInterval(!0),f._updateLastActivity(),!String.isNullOrEmpty(f.get_cultures())){f._cultureList=[];var w=String.format("Detect,Detect|{0}|False;{1}",i.Bar.AutoDetectLanguageOption,f.get_cultures()),a=w.split(/;/),y="Membership$Cultures",v=[];for(o=0;o<a.length;o++)String.isBlank(a[o])||(s=a[o].split(/\|/),Array.add(f._cultureList,s),h=new Web.Item(y,s[1]),s[2]=="True"&&h.set_selected(!0),h.set_script(String.format("$find('{0}').changeCulture('{1}');",f.get_id(),s[0])),Array.add(v,h),o==0&&Array.add(v,new Web.Item));$registerItems(y,v,Web.HoverStyle.ClickAndStay,Web.PopupPosition.Right,Web.ItemDescriptionStyle.None)}c=document.createElement("div");c.className="MembershipBarPlaceholder";document.body.insertBefore(c,document.body.childNodes[0]);f._membershipBar=$get("Membership_Login");l=f.loggedIn();f._membershipBar||(f._membershipBar=document.createElement("div"),document.body.childNodes.length>0?document.body.insertBefore(f._membershipBar,document.body.childNodes[0]):document.body.appendChild(f._membershipBar),e=new Sys.StringBuilder,f._membershipBar.id="Membership_Login",f._membershipBar.className="MembershipBar",!f._cultureList||__tf!=4||e.append(String.format('<div style="float:right" class="CultureLink"> | <a href="javascript:" onclick="$toggleHover();return false;" title="{1}" onfocus="$showHover(this, \'Membership$Cultures\', \'CultureSelector\', 1)" onblur="$hideHover(this)" onmouseover="$showHover(this, \'Membership$Cultures\', \'CultureSelector\', 1)" onmouseout="$hideHover(this)">{0}<\/a><\/div>',this.get_cultureName(),r.ChangeLanguageToolTip)),this.get_displayHelp()&&e.append(String.format('<div style="float:right" class="HelpLink"> | <a href="javascript:" onclick="$find(&quot;{0}&quot;).help();return false;">{1}<\/a><\/div>',this.get_id(),r.HelpLink)),!l&&this.get_authenticationEnabled()?this.get_displayLogin()&&e.append(String.format('<table id="LoginDialog" cellpadding="0" class="LoginDialog"><tr><td id="Anchor"><a href="javascript:" onfocus="$find(&quot;{0}&quot;).changeLoginDialogVisibility(true);return false" >{1}<\/a>{2}<\/td><\/tr><tr id="LoginControlsRow"><td id="LoginControls"><table><tr><td align="right" nowrap="nowrap">{3}<\/td><td><input type="text" id="UserName" size="20" value="" /><\/td><\/tr><tr><td align="right" nowrap="nowrap">{4}<\/td><td><input type="password" id="Password" size="20" /><\/td><\/tr>'+(this.get_displayRememberMe()?String.format('<tr><td align="right" colspan="2"><input type="checkbox" id="RememberMe"{0}/><label for="RememberMe">{1}<\/label><\/td><\/tr>',this.get_rememberMeSet()?' checked="checked"':"",r.RememberMe):"")+(this.get_displayPasswordRecovery()?'<tr><td>&nbsp;<\/td><td align="right" nowrap="nowrap"><a href="javascript:" onclick="$find(&quot;{0}&quot).passwordRecovery();return false;" id="PasswordRecovery">{6}<\/a><\/td><\/tr>':"")+(this.get_displaySignUp()?'<tr><td>&nbsp;<\/td><td align="right" nowrap="nowrap"><a href="javascript:" onclick="$find(&quot;{0}&quot).signUp();return false;" id="SignUp">{7}<\/a><\/td><\/tr>':"")+'<tr><td>&nbsp;<\/td><td align="right"><button id="Login">{5}<\/button><\/td><\/tr><\/table><\/td><\/tr><\/table>',this.get_id(),r.LoginLink,r.LoginText,r.UserName,r.Password,r.LoginButton,r.ForgotPassword,r.SignUp)):e.append(String.format('<table id="LoginDialog" cellpadding="0" class="LoginDialog LoginDialogCollapsed"><tr><td>'+(this.get_welcome()&&!String.isBlank(this.get_welcome())?String.localeFormat(this.get_welcome(),this.get_user(),new Date)+(this.get_authenticationEnabled()?" | ":""):"")+(this.get_displayMyAccount()?'<a id="MyAccount" href="javascript:" onclick="$find(&quot;{0}&quot;).myAccount();return false;">{1}<\/a> | ':"")+(this.get_authenticationEnabled()?'<a href="javascript:" onclick="$find(&quot;{0}&quot;).logout();return false;">{2}<\/a>':"")+"<\/td><\/tr><\/table>",this.get_id(),r.MyAccount,r.LogoutLink)),this._membershipBar.innerHTML=e.toString(),l&&(this.get_enablePermalinks()||this.get_enableHistory())&&(this._bookmarkBar=document.createElement("div"),this._bookmarkBar.className="BookmarkBar",c.appendChild(this._bookmarkBar),e=new Sys.StringBuilder,e.append('<table class="Frame"><tr>'),this.get_enableHistory()&&e.appendFormat('<td><a id="{0}_HistoryLink" href="javascript:" onclick="$find(\'{0}\').showHistory();return false" title="{2}">{1}<\/a><\/td>',this.get_id(),r.History,r.HistoryToolTip),this.get_enableHistory()&&this.get_enablePermalinks()&&e.append("<td>|<\/td>"),this.get_enablePermalinks()&&e.appendFormat('<td><a href="javascript:" onclick="$find(\'{0}\').showPermalink();return false" title="{4}">{1}<\/a><\/td><td style="display:none"><input id="{0}_Permalink" type="text" onfocus="this.select();"/><\/td><td style="display:none"><a id="{0}_AddToFavorites" href="javascript:" onclick="$find(\'{0}\')._addToFavorites();return false" class="AddBookmark" title="{2}">&nbsp;<\/a><\/td><td style="display:none"><a id="{0}_CancelFavorites" href="javascript:" onclick="$find(\'{0}\').showPermalink();return false" class="CancelBookmark" title="{3}">&nbsp;<\/a><\/td>',this.get_id(),r.Permalink,r.AddToFavorites,r.HelpCloseButton,r.PermalinkToolTip),e.append("<\/tr><\/table>"),this._bookmarkBar.innerHTML=e.toString()));document.body.style.paddingTop="0px";!l&&this.get_displayLogin()&&(this._loginDialog=$get("LoginDialog",this._membershipBar),p=n.bounds(this._loginDialog),this._loginDialog.style.width=p.width+"px",$get("LoginControlsRow",this._loginDialog)&&$addHandlers(this._loginDialog,{mouseover:this._loginDialogMouseOverHandler,mouseout:this._loginDialogMouseOutHandler},this),this._loginButton=$get("Login",this._membershipBar),this._loginButton&&$addHandler(this._loginButton,"click",this._loginButtonClickHandler),$(this._membershipBar).find("input").keyup(function(n){n.which==13&&f.login()}),this._userName=$get("UserName",this._membershipBar),this._userName&&$addHandler(this._userName,"keypress",this._textBoxKeyPressHandler),this._password=$get("Password",this._membershipBar),this._password&&$addHandler(this._password,"keypress",this._textBoxKeyPressHandler),this._rememberMe=$get("RememberMe",this._membershipBar),this.changeLoginDialogVisibility(t.location.href.match(/\?ReturnUrl=(.+)$/)!=null))},_login_Completed:function(u){var f,e;this._wait(!1);u?(e=t.location.href.match(/\?ReturnUrl=(.+)$/),setTimeout(function(){n._navigated=!0;t.location.replace(n.unanchor(e?unescape(e[1]):t.location.href))})):(f=this,n.alert(i.Messages.InvalidUserNameAndPassword,function(){r||f.changeLoginDialogVisibility(!0);f._userName.focus()}))},_method_Failure:function(t,i,r){this._wait(!1);n.alert(String.format("Method {0} has failed. {1}",r,t.get_message()))},_loginButtonClick:function(){this.login()},_loginDialogMouseOver:function(){this.changeLoginDialogVisibility(!0,50)},_loginDialogMouseOut:function(){this.changeLoginDialogVisibility(!1,500)},_textBoxKeyPress:function(n){n.charCode==Sys.UI.Key.enter&&(n.preventDefault(),this.login());n.charCode==Sys.UI.Key.esc&&(n.preventDefault(),this.set_isLoginDialogVisible(!0),this.changeLoginDialogVisibility(!1))},login:function(){var t=this,r;if(t.loggedIn(),!t._waitDataView||!t._waitDataView._busy())if(this._userName&&this._password){if(r=/^\s*$/,r.exec(this._userName.value)){n.alert(i.Messages.BlankUserName,function(){t.set_isLoginDialogVisible(!1);t._userName.focus()});return}if(r.exec(this._password.value)){this.set_isLoginDialogVisible(!1);n.alert(i.Messages.BlankPassword,function(){t.set_isLoginDialogVisible(!1);t._password.focus()});return}this._wait(!0);n.login(this._userName.value,this._password.value,this._rememberMe!=null&&this._rememberMe.checked,function(){t._login_CompletedHandler(!0)},function(){t._login_CompletedHandler(!1)})}else n.alert("UserName and/or Password elements are not found in the Memership_Login")},_wait:function(n){var t=this._waitDataView;t||(this._waitDiv=$("<div/>"),t=this._waitDataView=$create(Web.DataView,{},null,null,this._waitDiv[0]));t._busy(n)},logout:function(){this._protecting=!1;n.logout(function(){setTimeout(function(){n._navigated=!0;location.reload()})})},signUp:function(){this.changeLoginDialogVisibility(!1);Web.DataView.showModal($get("SignUp",this.get_membershipBar()),"MyProfile","signUpForm","New","signUpForm",this.get_baseUrl(),this.get_servicePath())},passwordRecovery:function(){this.changeLoginDialogVisibility(!1);Web.DataView.showModal($get("PasswordRecovery",this.get_membershipBar()),"MyProfile","passwordRequestForm","New","passwordRequestForm",this.get_baseUrl(),this.get_servicePath())},myAccount:function(){Web.DataView.showModal($get("MyAccount",this.get_membershipBar()),"MyProfile","myAccountForm","Edit","myAccountForm",this.get_baseUrl(),this.get_servicePath())},helpUrl:function(){var i=t.location.pathname.split(/\//),r=this.get_baseUrl().split(/\//),u=i.slice(0,1).join("/"),n=i.slice(i.length-r.length).join("/");return n.match(/^\//)&&(n=n.substr(1)),(u||"/")+"help/"+n},help:function(n){var a,f,s,h,e,u,l,c,o;if(typeof __settings!="undefined"&&__settings.help){a=this;f=a.helpUrl();r&&r.busy({progress:!0});$.ajax(f).done(function(n){f=n.match(/404 Not Found/)?__baseUrl+"help":f;r?(r.busy({progress:!1}),r.navigate({href:f})):t.open(f,"_blank")});return}if(s=t.location.pathname,h=this.get_baseUrl()=="./"?s.substr(s.lastIndexOf("/"),100):"",h.length==0)for(e=this.get_baseUrl().split(/\//),u=s.split(/\//),e[e.length-1]==""&&Array.removeAt(e,e.length-1),u[u.length-1]==""&&Array.removeAt(u,u.length-1),u[0]==""&&Array.removeAt(u,0),l=e.length,u[u.length-1].indexOf(".")==-1&&l--,c=u.length-l-1;c<u.length;c++)h+="/"+u[c];if(o=String.format("{0}help{1}",this.get_baseUrl(),h),o=String.format("{0}Help/Default.aspx?topic={1}",this.get_baseUrl(),encodeURI(o)),n){t.open(o);this.help();return}this._helpBar||(this._helpDiv=document.createElement("div"),document.body.appendChild(this._helpDiv),this._helpDiv.className="HelpBar",this._helpDiv.innerHTML=String.format('<div class="Title">{1}<\/div><iframe id="help" frameBorder="0"><\/iframe><div class="Buttons"><button onclick="$find(&quot;{0}&quot;).help()">{2}<\/button><button onclick="$find(&quot;{0}&quot;).help(true)">{3}<\/button><\/div>',this.get_id(),i.Bar.HelpLink,i.Bar.HelpCloseButton,i.Bar.HelpFullScreenButton),this._helpFrame=$get("help",this._helpDiv),this._helpBar=$create(AjaxControlToolkit.AlwaysVisibleControlBehavior,{HorizontalSide:AjaxControlToolkit.HorizontalSide.Right,VerticalSide:AjaxControlToolkit.VerticalSide.Top,HorizontalOffset:18,VerticalOffset:30},null,null,this._helpDiv),Sys.UI.DomElement.setVisible(this._helpDiv,!1));Sys.UI.DomElement.setVisible(this._helpDiv,!Sys.UI.DomElement.getVisible(this._helpDiv));Sys.UI.DomElement.getVisible(this._helpDiv)&&(this._helpFrame.src==""&&(this._helpFrame.src=o),this._helpBar._reposition())}};u.registerClass("Web.Membership",Sys.Component);Type.registerNamespace("Web");Web.MembershipManager=function(n){Web.MembershipManager.initializeBase(this,[n])};Web.MembershipManager.prototype={get_servicePath:function(){return this._servicePath},set_servicePath:function(n){this._servicePath=n},get_baseUrl:function(){return this._baseUrl},set_baseUrl:function(n){this._baseUrl=n},initialize:function(){Web.MembershipManager.callBaseMethod(this,"initialize")},dispose:function(){Web.MembershipManager.callBaseMethod(this,"dispose")},updated:function(){var n;Web.MembershipManager.callBaseMethod(this,"updated");var t=this.get_element(),i=Web.MembershipResources.Manager,u=this.get_baseUrl();r?$(String.format('<div data-flow="NewRow"><div data-activator="Tab|{0}">    <div id="membershipUsers"><\/div> <\/div> <div data-activator="Tab|{1}">    <div id="membershipRoles"><\/div><\/div><div data-activator="Tab|{2}">    <div id="membershipRoleUsers"><\/div><\/div><\/div>',i.UsersTab,i.RolesTab,i.UsersInRole)).appendTo(t):(Sys.UI.DomElement.addCssClass(t,"MembershipManager"),n=new Sys.StringBuilder,n.append('<div class="TabContainer" id="MembershipManager1_SecurityTabs" style="visibility:hidden;">'),n.append('<div id="MembershipManager1_SecurityTabs_header">'),n.append(String.format('<span id="__tab_MembershipManager1_SecurityTabs_UsersTab">{0}<\/span><span id="__tab_MembershipManager1_SecurityTabs_RolesTab">{1}<\/span>',i.UsersTab,i.RolesTab)),n.append('<\/div><div id="MembershipManager1_SecurityTabs_body">'),n.append('<div id="MembershipManager1_SecurityTabs_UsersTab" style="display:none;visibility:hidden;">'),n.append('<div id="MembershipManager1_SecurityTabs_UsersTab_Users"><\/div>'),n.append('<\/div><div id="MembershipManager1_SecurityTabs_RolesTab" style="display:none;visibility:hidden;">'),n.append('<div id="MembershipManager1_SecurityTabs_RolesTab_Roles"><\/div>'),n.append('<div id="MembershipManager1_SecurityTabs_RolesTab_UsersInRoles" style="margin-top: 8px"><\/div>'),n.append("<\/div>"),n.append("<\/div>"),n.append("<\/div>"),t.innerHTML=n.toString());$create(Web.DataView,{baseUrl:u,controller:"aspnet_Membership",id:"MembershipManager1_SecurityTabs_UsersTab_UsersExtender",pageSize:10,servicePath:this.get_servicePath(),showActionBar:!0,viewId:null,showSearchBar:!0,showFirstLetters:!0,tags:"multi-select-none"},null,null,r?$("#membershipUsers")[0]:$get("MembershipManager1_SecurityTabs_UsersTab_Users",t));r||$create(AjaxControlToolkit.TabPanel,{headerTab:$get("__tab_MembershipManager1_SecurityTabs_UsersTab",t)},null,{owner:"MembershipManager1_SecurityTabs"},$get("MembershipManager1_SecurityTabs_UsersTab",t));$create(Web.DataView,{baseUrl:u,controller:"aspnet_Roles",id:"MembershipManager1_SecurityTabs_RolesTab_RolesExtender",pageSize:5,servicePath:this.get_servicePath(),showActionBar:!0,viewId:null,showSearchBar:!0,tags:"multi-select-none"},null,null,r?$("#membershipRoles")[0]:$get("MembershipManager1_SecurityTabs_RolesTab_Roles",t));$create(Web.DataView,{baseUrl:u,controller:"aspnet_Membership",filterFields:"RoleId",filterSource:"MembershipManager1_SecurityTabs_RolesTab_RolesExtender",id:"MembershipManager1_SecurityTabs_RolesTab_UsersInRolesExtender",pageSize:5,servicePath:this.get_servicePath(),showActionBar:!0,viewId:"usersInRolesGrid",autoHide:1,showSearchBar:!0,showFirstLetters:!0,tags:"multi-select-none"},null,null,r?$("#membershipRoleUsers")[0]:$get("MembershipManager1_SecurityTabs_RolesTab_UsersInRoles",t));r||($create(AjaxControlToolkit.TabPanel,{headerTab:$get("__tab_MembershipManager1_SecurityTabs_RolesTab",t)},null,{owner:"MembershipManager1_SecurityTabs"},$get("MembershipManager1_SecurityTabs_RolesTab",t)),$create(AjaxControlToolkit.TabContainer,{activeTabIndex:0,clientStateField:$get("MembershipManager1_SecurityTabs_ClientState",t)},null,null,$get("MembershipManager1_SecurityTabs",t)))}};Web.MembershipManager.registerClass("Web.MembershipManager",Sys.UI.Behavior);Sys.Extended&&typeof AjaxControlToolkit=="undefined"&&(AjaxControlToolkit=Sys.Extended.UI);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded()})();